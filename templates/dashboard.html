{% extends "base.html" %}
{% block title %}Dashboard | Fire Alarm{% endblock %}

{% block body %}
<div class="container py-4 text-center">
  <div class="text-center mb-4">
    <img src="{{ url_for('static', filename='img/node.png') }}" alt="Logo Cáº£m Biáº¿n" width="150">
  </div>
  <h2 class="text-center mb-4">GiÃ¡m sÃ¡t cáº£m biáº¿n</h2>

  <div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th>Äá»‹a chá»‰ thiáº¿t bá»‹</th>
          <th>Nhiá»‡t Ä‘á»™ (â„ƒ)</th>
          <th>Äá»™ áº©m (%)</th>
          <th>Ná»“ng Ä‘á»™ gas</th>
          <th>Dáº¥u bÃ¡o lá»­a</th>
        </tr>
      </thead>
      <tbody id="sensor-data">
        <tr>
          <td colspan="5">Äang chá» dá»¯ liá»‡u...</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js"></script>
<script>
const socket = io();
socket.on("update_data_sensor", function(data) {
  const tbody = document.getElementById("sensor-data");
  tbody.innerHTML = `
    <tr>
      <td>${data.address}</td>
      <td>${data.temperature}â„ƒ</td>
      <td>${data.humidity}%</td>
      <td>${data.gas}</td>
      <td style="color: ${data.fire == 1 ? 'red' : 'green'};">
        ${data.fire == 1 ? "ğŸš¨ CÃ³ chÃ¡y" : "An toÃ n"}
      </td>
    </tr>
  `;
});
</script>
{% endblock %}
